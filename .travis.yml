language: node_js
node_js:
 - "0.10"
before_install:
 - gem install sass
script:
 - npm test
cache:
  directories:
    - node_modules
after_success:
  # Turn off warnings about SSH keys:
  - echo "Host heroku.com" >> ~/.ssh/config
  - echo "   StrictHostKeyChecking no" >> ~/.ssh/config
  - echo "   CheckHostIP no" >> ~/.ssh/config
  - echo "   UserKnownHostsFile=/dev/null" >> ~/.ssh/config
  # Clear your current Heroku SSH keys:
  - heroku keys:clear
  # Add a new SSH key to Heroku
  - yes | heroku keys:add
  # Clone Heroku deployment repo to dist folder
  - git clone https://git.heroku.com/terra-mystica-lobby.git dist
  # Build
  - npm run build
  # Commit and Push dist folder to Heroku
  - cd dist
  - git config --global user.name "ertrzyiks"
  - git config --global user.email "mateusz.derks@gmail.com"
  - git add *
  - git commit -am "Travis CI"
  - git push origin master
